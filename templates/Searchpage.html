<!DOCTYPE html>
<html>
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
.w3-theme-blue {color:#fff !important;background-color: #bcccfe !important}

.w3-theme-l3 {color:#000 !important; background-color: #cfdbfe !important}
.w3-theme-l2 {color:#fff !important; background-color: #d5a4d4 !important}
.w3-theme-l1 {color:#fff !important; background-color: #8a8aae !important}
.w3-theme-l4-blue {color:#000 !important;background-color: #ffffff !important}
.w3-theme-l3-purple {color:#000 !important; background-color:#e4c6e2 !important}
.w3-theme-l3-darkpurple {color:#fff !important; background-color:#2c2c55 !important}


body, h1,h2,h3,h4,h5,h6 {font-family: "Montserrat", sans-serif}
.w3-row-padding img {margin-bottom: 12px}
/* Set the width of the sidebar to 120px */
.w3-sidebar {width: 120px;background: #757aa7;}
/* Add a left margin to the "page content" that matches the width of the sidebar (120px) */
#main {margin-left: 120px}
/* Remove margins from "page content" on small screens */

</style>
<body class="w3-theme-blue">

<!-- Icon Bar (Sidebar - hidden on small screens) -->
<nav class="w3-sidebar w3-card-4 w3-bar-block w3-small w3-hide-small w3-center ">
  <!-- Avatar image in top left corner -->
  <img src="../static/caticon.gif" style="width:100%" alt="icon">
  <a href='{{ url_for('hello_world') }}'class="w3-bar-item w3-button w3-padding-large w3-theme-l3 w3-hover-white w3-section ">
    <i class="fa fa-home w3-xxlarge"></i>
    <p>HOME</p>
  </a>
    <a href='{{ url_for('results') }}' class="w3-bar-item w3-button w3-padding-large w3-theme-l3-darkpurple w3-hover-white w3-section">
    <i class="fa fa-search w3-xxlarge"></i>
    <p>SEARCH</p>
  </a>

</nav>

<!-- Navbar on small screens (Hidden on medium and large screens) -->
<div class="w3-top w3-hide-large w3-hide-medium" id="myNavbar">
  <div class="w3-bar w3-theme-l3-darkpurple w3-hover-opacity-off w3-center w3-small">
    <a href='{{ url_for('hello_world') }}' class="w3-bar-item w3-button w3-text-white" style="width:25% !important">HOME</a>

    <a href='{{ url_for('results') }}' class="w3-bar-item w3-button w3-text-white" style="width:25% !important">SEARCH</a>
  </div>
</div>

<!-- Page Content -->
<div class="w3-padding-large" id="main">
  <!-- Header/Home -->
  <header class="w3-card w3-padding-32 w3-center w3-white w3-section" id="home">
    <h1 class="w3-jumbo"><span class="w3-hide-small"></span> PubMed Search</h1>
    <p>For easy up to date information</p>
  </header>

 <!-- FORM -->
    <div class="w3-card-4 w3-white w3-section">
  <div class="w3-container w3-theme-l3-darkpurple">
    <h2>Search </h2>
  </div>
  <form class="w3-container" method="post" action="https://hannl-hlo-bi2a1-app.azurewebsites.net/result">
    <p>
    <label class="w3-text-black"><b>disease-characteristics</b></label>
    <input placeholder="Searchterm1 , Searchterm2" class="w3-input w3-border w3-white" name="disease_characteristic" type="text" required></p>
    <p>
    <p>
    <label class="w3-text-black"><b>E-mail</b></label>
    <input  placeholder="Your.Name.Here@example.org" class="w3-input w3-border w3-white" name="mail" type="text" pattern="\S+@\S+" required></p>
    <p>
      <p><label class="w3-text-black"><b>Gene List</b></label></p>
        <p>
            <label>
            <textarea placeholder="Gene1 &#10;Gene2&#10;Gene3 &#10;etc.."
                      name="gene_list"></textarea>
            </label>
        </p>
    <p>
    <select class="w3-select w3-section" name="publication_date">
      <option value="" disabled selected>Choose max publication date</option>
      <option value="3">3 Months</option>
      <option value="6">6 Months</option>
      <option value="9">9 Months</option>
      <option value="12">1 Year</option>
      <option value="24">2 Years</option>

    </select>
    </p>
    <p>
    <button class="w3-btn w3-theme-l3-darkpurple w3-text-white">Search</button></p>
  </form>
</div>
     <!--  end FORM -->
 <!-- start Results  link to pubmed article https://www.ncbi.nlm.nih.gov/pubmed/?term= item.pubmedId-->
    <div class="w3-card-4 w3-white w3-section">
  <div class="w3-container w3-theme-l3-darkpurple">
    <h2>Results </h2>
  </div>
    <div class="w3-container w3-section w3-theme-l1" >
        {% if plot != None %}
        <img class="w3-margin" src="data:image/png;base64, {{ plot }}">
        {% endif %}
    </div>
    {% if"articles" in genedic.keys() %}
     {% for name, gene in genedic["articles"].items()%}

         <div class = "w3-card w3-white, w3-margin">
         {% for omim_name, omim_id in genedic["omim_id"].items() %}
             {% if name == omim_name %}
             <button onclick="myFunction('{{ name }}')" class="w3-button w3-block w3-theme-l1  w3-left-align">
                 {{ name }} </button>
            <div id="{{ name }}" class="w3-container w3-hide w3-border">
            <div class="w3-card">

            <a href="https://omim.org/entry/{{ omim_id[0] }}" target="_blank">
            <button class="w3-button w3-white w3-border w3-wide w3-margin" style="width: 30%">OMIM</button>
            </a>
            <a href="https://www.uniprot.org/uniprot/{{ omim_id[1] }}" target="_blank">
            <button class="w3-button w3-white w3-border w3-wide w3-margin" style="width: 30%">UNIPROT</button>
            </a>
            <a href="https://www.ncbi.nlm.nih.gov/gene/{{ omim_id[2] }}" target="_blank">
            <button class="w3-button w3-white w3-border w3-wide w3-margin" style="width: 30%">NCBI</button>
            </a>
            </div>
             {% endif %}
            {% endfor %}
              <ul class="w3-ul">
                {% for genename , list in gene.items() %}
                    <li class="w3-theme-l1 w3-section"> <b>{{ genename }}</b> </li>
                    {% for item in list %}
                    <li><a href="https://www.ncbi.nlm.nih.gov/pubmed/?term={{ item.pubmedID }}" target="_blank">{{ item.getTitle() }}</a></li>
                    {% endfor %}
                {% endfor %}
              </ul>
            </div>
         </div>
     {% endfor %}
    {% endif %}
    </div>
</div>

<script>
function myFunction(id) {
    const x = document.getElementById(id);
    if (x.className.indexOf("w3-show") === -1) {
    x.className += " w3-show";
  } else {
    x.className = x.className.replace(" w3-show", "");
  }
}
</script>


</body>
</html>
